(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d1d4a92"],{1799:function(t,e,c){"use strict";var o=c("7a23"),a={"aria-label":"Page navigation example"},n={class:"pagination"},r=Object(o["h"])("span",{"aria-hidden":"true"},"«",-1),i=Object(o["h"])("span",{"aria-hidden":"true"},"»",-1);function l(t,e,c,l,d,s){return Object(o["t"])(),Object(o["e"])("nav",a,[Object(o["h"])("ul",n,[Object(o["h"])("li",{class:["page-item",{disabled:!c.page.has_pre}]},[Object(o["h"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[1]||(e[1]=Object(o["N"])((function(e){return t.$emit("get-product",c.page.current_page-1)}),["prevent"]))},[r])],2),(Object(o["t"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(c.page.total_pages,(function(e){return Object(o["t"])(),Object(o["e"])("li",{class:["page-item",{active:e===c.page.current_page}],key:e},[Object(o["h"])("a",{class:"page-link",href:"#",onClick:Object(o["N"])((function(c){return t.$emit("get-product",e)}),["prevent"])},Object(o["D"])(e),9,["onClick"])],2)})),128)),Object(o["h"])("li",{class:["page-item",{disabled:!c.page.has_next}]},[Object(o["h"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[2]||(e[2]=Object(o["N"])((function(e){return t.$emit("get-product",c.page.current_page+1)}),["prevent"]))},[i])],2)])])}var d={props:["page"]};d.render=l;e["a"]=d},"4de4":function(t,e,c){"use strict";var o=c("23e7"),a=c("b727").filter,n=c("1dde"),r=n("filter");o({target:"Array",proto:!0,forced:!r},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return n}));c("b64b"),c("a4d3"),c("4de4"),c("e439"),c("159b"),c("dbb4");function o(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function a(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,o)}return c}function n(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?a(Object(c),!0).forEach((function(e){o(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},6642:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a={class:"text-end mt-4"},n={class:"table mt-4"},r=Object(o["h"])("thead",null,[Object(o["h"])("tr",null,[Object(o["h"])("th",{width:"120"}," 分類 "),Object(o["h"])("th",null,"產品名稱"),Object(o["h"])("th",{width:"120"}," 原價 "),Object(o["h"])("th",{width:"120"}," 售價 "),Object(o["h"])("th",{width:"100"}," 是否啟用 "),Object(o["h"])("th",{width:"120"}," 編輯 ")])],-1),i={key:0,class:"text-success"},l={key:1},d={class:"btn-group"},s={class:"d-flex justify-content-center mt-5"};function u(t,e,c,u,b,p){var h=Object(o["A"])("Loading"),m=Object(o["A"])("pagination"),O=Object(o["A"])("product-modal"),j=Object(o["A"])("del-product-modal");return Object(o["t"])(),Object(o["e"])("div",null,[Object(o["h"])(h,{active:b.isLoading,"z-index":1060},null,8,["active"]),Object(o["h"])("div",a,[Object(o["h"])("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=function(t){return p.openModal(!0)})}," 建立新的產品 ")]),Object(o["h"])("table",n,[r,Object(o["h"])("tbody",null,[(Object(o["t"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(b.products,(function(e){return Object(o["t"])(),Object(o["e"])("tr",{key:e.id},[Object(o["h"])("td",null,Object(o["D"])(e.category),1),Object(o["h"])("td",null,Object(o["D"])(e.title),1),Object(o["h"])("td",null,Object(o["D"])(t.$filters.currency(e.origin_price)),1),Object(o["h"])("td",null,Object(o["D"])(t.$filters.currency(e.price)),1),Object(o["h"])("td",null,[e.is_enabled?(Object(o["t"])(),Object(o["e"])("span",i,"啟用")):(Object(o["t"])(),Object(o["e"])("span",l,"未啟用"))]),Object(o["h"])("td",null,[Object(o["h"])("div",d,[Object(o["h"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return p.openModal(!1,e)}}," 編輯 ",8,["onClick"]),Object(o["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return p.openDelProductModal(e)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(o["h"])("div",s,[Object(o["h"])(m,{page:b.pagination,onGetProduct:p.getProducts},null,8,["page","onGetProduct"])]),Object(o["h"])(O,{product:b.tempProduct,onUpdateProduct:p.updateProduct,isNew:b.isNew,ref:"productModal"},null,8,["product","onUpdateProduct","isNew"]),Object(o["h"])(j,{product:b.tempProduct,onDelProduct:p.delProduct,ref:"delModal"},null,8,["product","onDelProduct"])])}var b=c("5530"),p=(c("99af"),c("e1a2")),h=(c("a434"),c("a4d3"),c("e01a"),{id:"productModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),m={class:"modal-dialog modal-xl"},O={class:"modal-content border-0"},j={class:"modal-header bg-dark text-white"},f={id:"productModalLabel",class:"modal-title"},g={key:0},v={key:1},y=Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),P={class:"modal-body"},M={class:"row"},w={class:"col-sm-4"},k={class:"mb-3"},U=Object(o["h"])("label",{for:"image",class:"form-label"},"請輸入圖片網址",-1),x={class:"mb-3"},$={for:"customFile",class:"form-label"},C=Object(o["g"])("或 上傳圖片 "),D={key:0,class:"fas fa-spinner fa-spin"},_={key:0,class:"mt-5"},S={key:0},N={class:"col-sm-8"},V={class:"form-group"},L=Object(o["h"])("label",{for:"title"},"標題",-1),H={class:"row"},F={class:"form-group col-md-6"},A=Object(o["h"])("label",{for:"category"},"分類",-1),I={class:"form-group col-md-6"},G=Object(o["h"])("label",{for:"price"},"單位",-1),E={class:"row"},J={class:"form-group col-md-6"},z=Object(o["h"])("label",{for:"origin_price"},"原價",-1),B={class:"form-group col-md-6"},T=Object(o["h"])("label",{for:"price"},"售價",-1),q=Object(o["h"])("hr",null,null,-1),K={class:"form-group"},Q=Object(o["h"])("label",{for:"description"},"產品描述",-1),R={class:"form-group"},W=Object(o["h"])("label",{for:"content"},"說明內容",-1),X={class:"form-group"},Y={class:"form-check"},Z=Object(o["h"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),tt={class:"modal-footer"},et=Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ct(t,e,c,a,n,r){return Object(o["t"])(),Object(o["e"])("div",h,[Object(o["h"])("div",m,[Object(o["h"])("div",O,[Object(o["h"])("div",j,[Object(o["h"])("h5",f,[c.isNew?(Object(o["t"])(),Object(o["e"])("span",g,"新增產品")):(Object(o["t"])(),Object(o["e"])("span",v,"新增產品"))]),y]),Object(o["h"])("div",P,[Object(o["h"])("div",M,[Object(o["h"])("div",w,[Object(o["h"])("div",k,[U,Object(o["M"])(Object(o["h"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempProduct.imageUrl=t}),type:"text",class:"form-control",placeholder:"請輸入圖片連結",id:"image"},null,512),[[o["H"],n.tempProduct.imageUrl]])]),Object(o["h"])("div",x,[Object(o["h"])("label",$,[C,n.status.fileUploading?(Object(o["t"])(),Object(o["e"])("i",D)):Object(o["f"])("",!0)]),Object(o["h"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return r.uploadFile&&r.uploadFile.apply(r,arguments)})},null,544)]),Object(o["h"])("img",{class:"img-fluid",src:n.tempProduct.imageUrl},null,8,["src"]),n.tempProduct.imagesUrl?(Object(o["t"])(),Object(o["e"])("div",_,[(Object(o["t"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(n.tempProduct.imagesUrl,(function(t,e){return Object(o["t"])(),Object(o["e"])("div",{class:"mb-3",key:e},[Object(o["M"])(Object(o["h"])("input",{type:"url",class:"form-control form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":function(t){return n.tempProduct.imagesUrl[e]=t}},null,8,["onUpdate:modelValue"]),[[o["H"],n.tempProduct.imagesUrl[e]]]),Object(o["h"])("div",null,[Object(o["h"])("img",{class:"img-fluid",src:t},null,8,["src"])]),Object(o["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return n.tempProduct.imagesUrl.splice(e,1)}},"移除",8,["onClick"])])})),128)),!n.tempProduct.imagesUrl.length||n.tempProduct.imagesUrl[n.tempProduct.imagesUrl.length-1]?(Object(o["t"])(),Object(o["e"])("div",S,[Object(o["h"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(t){return n.tempProduct.imagesUrl.push("")})}," 新增圖片 ")])):Object(o["f"])("",!0)])):Object(o["f"])("",!0)]),Object(o["h"])("div",N,[Object(o["h"])("div",V,[L,Object(o["M"])(Object(o["h"])("input",{id:"title","onUpdate:modelValue":e[4]||(e[4]=function(t){return n.tempProduct.title=t}),type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[o["H"],n.tempProduct.title]])]),Object(o["h"])("div",H,[Object(o["h"])("div",F,[A,Object(o["M"])(Object(o["h"])("input",{id:"category","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.category=t}),type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[o["H"],n.tempProduct.category]])]),Object(o["h"])("div",I,[G,Object(o["M"])(Object(o["h"])("input",{id:"unit","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.unit=t}),type:"text",class:"form-control",placeholder:"請輸入單位"},null,512),[[o["H"],n.tempProduct.unit]])])]),Object(o["h"])("div",E,[Object(o["h"])("div",J,[z,Object(o["M"])(Object(o["h"])("input",{id:"origin_price","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.origin_price=t}),type:"number",min:"0",class:"form-control",placeholder:"請輸入原價"},null,512),[[o["H"],n.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["h"])("div",B,[T,Object(o["M"])(Object(o["h"])("input",{id:"price","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.price=t}),type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[o["H"],n.tempProduct.price,void 0,{number:!0}]])])]),q,Object(o["h"])("div",K,[Q,Object(o["M"])(Object(o["h"])("textarea",{id:"description","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.description=t}),type:"text",class:"form-control",placeholder:"請輸入產品描述"},"\r\n           ",512),[[o["H"],n.tempProduct.description]])]),Object(o["h"])("div",R,[W,Object(o["M"])(Object(o["h"])("textarea",{id:"description","onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.content=t}),type:"text",class:"form-control",placeholder:"請輸入說明內容"},"\r\n           ",512),[[o["H"],n.tempProduct.content]])]),Object(o["h"])("div",X,[Object(o["h"])("div",Y,[Object(o["M"])(Object(o["h"])("input",{id:"is_enabled","onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.is_enabled=t}),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[o["G"],n.tempProduct.is_enabled]]),Z])])])])]),Object(o["h"])("div",tt,[et,Object(o["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[12]||(e[12]=function(e){return t.$emit("update-product",n.tempProduct)})}," 確認 ")])])])],512)}var ot=c("7c2b"),at=c.n(ot),nt={props:{product:{type:Object,dafault:function(){return{}}},isNew:{type:Boolean,default:!1}},data:function(){return{status:{},modal:"",tempProduct:{}}},emits:["update-product"],inject:["emitter"],watch:{product:function(){this.tempProduct=this.product,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.tempProduct.imageUrl||(this.tempProduct.imageUrl="")}},methods:{uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",e);var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jimmytest","/admin/upload");this.status.fileUploading=!0,this.$http.post(o,c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.status.fileUploading=!1,e.data.success?(t.tempProduct.imageUrl=e.data.imageUrl,t.$refs.fileInput.value="",t.emitter.emit("push-message",{style:"success",title:"圖片上傳結果"})):(t.$refs.fileInput.value="",t.emitter.emit("push-message",{style:"danger",title:"圖片上傳結果",content:e.data.message}))}))},openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new at.a(this.$refs.modal)}};nt.render=ct;var rt=nt,it=c("1799"),lt={data:function(){return{products:[],pagination:{},tempProduct:{imagesUrl:[]},isNew:!1,isLoading:!1,status:{fileUploading:!1},model:{editModal:"",delModal:""},currentPage:1}},components:{delProductModal:p["a"],productModal:rt,pagination:it["a"]},inject:["emitter","$httpMessageState"],methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jimmytest","/admin/products?page=").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){e.data.success?(t.products=e.data.products,t.pagination=e.data.pagination,t.isLoading=!1):console.log(e.data.message)})).catch((function(t){console.log(t)}))},openModal:function(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object(b["a"])({},e),this.isNew=!1);var c=this.$refs.productModal;c.openModal()},updateProduct:function(t){var e=this;this.tempProduct=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jimmytest","/admin/product"),o="post",a="新增產品";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jimmytest","/admin/product/").concat(this.tempProduct.id),o="put",a="更新產品");var n=this.$refs.productModal;this.$http[o](c,{data:this.tempProduct}).then((function(t){t.data.success?(e.$httpMessageState(t,a),n.hideModal(),e.getProducts(e.currentPage)):e.$httpMessageState(t,a)})).catch((function(t){console.log(t)}))},openDelProductModal:function(t){this.tempProduct=Object(b["a"])({},t);var e=this.$refs.delModal;e.openModal()},delProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jimmytest","/admin/product/").concat(this.tempProduct.id);this.isLoading=!0,this.$http.delete(e).then((function(e){if(e.data.success){t.$httpMessageState(e,"刪除產品");var c=t.$refs.delModal;c.hideModal(),t.getProducts(t.currentPage)}else t.$httpMessageState(e,"刪除產品")}))}},created:function(){this.getProducts()}};lt.render=u;e["default"]=lt},dbb4:function(t,e,c){var o=c("23e7"),a=c("83ab"),n=c("56ef"),r=c("fc6a"),i=c("06cf"),l=c("8418");o({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,c,o=r(t),a=i.f,d=n(o),s={},u=0;while(d.length>u)c=a(o,e=d[u++]),void 0!==c&&l(s,e,c);return s}})},e01a:function(t,e,c){"use strict";var o=c("23e7"),a=c("83ab"),n=c("da84"),r=c("5135"),i=c("861d"),l=c("9bf2").f,d=c("e893"),s=n.Symbol;if(a&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new s(t):void 0===t?s():s(t);return""===t&&(u[e]=!0),e};d(b,s);var p=b.prototype=s.prototype;p.constructor=b;var h=p.toString,m="Symbol(test)"==String(s("test")),O=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=h.call(t);if(r(u,t))return"";var c=m?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}},e1a2:function(t,e,c){"use strict";var o=c("7a23"),a={id:"delProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},n={class:"modal-dialog"},r={class:"modal-content border-0"},i={class:"modal-header bg-danger text-white"},l={id:"delProductModalLabel",class:"modal-title"},d=Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),s={class:"modal-body"},u=Object(o["g"])(" 是否刪除 "),b={class:"text-danger"},p=Object(o["g"])(" 商品(刪除後將無法恢復)。 "),h={class:"modal-footer"},m=Object(o["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),O=Object(o["g"])("` ");function j(t,e,c,j,f,g){return Object(o["t"])(),Object(o["e"])(o["a"],null,[Object(o["h"])("div",a,[Object(o["h"])("div",n,[Object(o["h"])("div",r,[Object(o["h"])("div",i,[Object(o["h"])("h5",l,[Object(o["h"])("span",null,"刪除 "+Object(o["D"])(c.product.title),1)]),d]),Object(o["h"])("div",s,[u,Object(o["h"])("strong",b,Object(o["D"])(c.product.title),1),p]),Object(o["h"])("div",h,[m,Object(o["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(e){return t.$emit("del-product",c.product)})}," 確認刪除 ")])])])],512),O],64)}var f=c("7c2b"),g=c.n(f),v={props:{product:{type:Object,dafalut:function(){return{}}}},data:function(){return{modal:""}},emits:["del-product"],methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new g.a(this.$refs.modal)}};v.render=j;e["a"]=v},e439:function(t,e,c){var o=c("23e7"),a=c("d039"),n=c("fc6a"),r=c("06cf").f,i=c("83ab"),l=a((function(){r(1)})),d=!i||l;o({target:"Object",stat:!0,forced:d,sham:!i},{getOwnPropertyDescriptor:function(t,e){return r(n(t),e)}})}}]);
//# sourceMappingURL=chunk-3d1d4a92.7d7bc42a.js.map